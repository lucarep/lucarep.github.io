<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>6_RA :: Luke&#39;s Statistics Blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Table of Contents
 THE RUNNING MEDIAN JAVA ALGORITHM  THE RUNNING MEDIAN As we have already seen in the previous dedicated article,the median of a set of integers is the midpoint value of the data set for which an equal number of integers are less than and greater than the value.
 If we keep each number in a sorted sequence then cost of single entry is O(n) and finding median is O(n)." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://lucarep.github.io/homework6/6_ra/" />




<link rel="stylesheet" href="https://lucarep.github.io/assets/style.css">






<link rel="apple-touch-icon" href="https://lucarep.github.io/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://lucarep.github.io/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="6_RA">
<meta property="og:description" content="Table of Contents
 THE RUNNING MEDIAN JAVA ALGORITHM  THE RUNNING MEDIAN As we have already seen in the previous dedicated article,the median of a set of integers is the midpoint value of the data set for which an equal number of integers are less than and greater than the value.
 If we keep each number in a sorted sequence then cost of single entry is O(n) and finding median is O(n)." />
<meta property="og:url" content="https://lucarep.github.io/homework6/6_ra/" />
<meta property="og:site_name" content="Luke&#39;s Statistics Blog" />

  <meta property="og:image" content="https://lucarep.github.io/img/6_RA.jpg">

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-11-04 00:00:00 &#43;0000 UTC" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Luke&#39;s Statistics Blog
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/homework1">Homework 1</a></li>
        
      
      
        <ul class="menu__sub-inner">
          <li class="menu__sub-inner-more-trigger">Show more ▾</li>

          <ul class="menu__sub-inner-more hidden">
            
              
                <li><a href="/homework2">Homework 2</a></li>
              
            
              
                <li><a href="/homework3">Homework 3</a></li>
              
            
              
                <li><a href="/homework4">Homework 4</a></li>
              
            
              
                <li><a href="/homework5">Homework 5</a></li>
              
            
              
                <li><a href="/homework6">Homework 6</a></li>
              
            
              
                <li><a href="/homework7">Homework 7</a></li>
              
            
              
                <li><a href="https://github.com/lucarep">My GitHub</a></li>
              
            
          </ul>
        </ul>
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/homework1">Homework 1</a></li>
      
    
      
        <li><a href="/homework2">Homework 2</a></li>
      
    
      
        <li><a href="/homework3">Homework 3</a></li>
      
    
      
        <li><a href="/homework4">Homework 4</a></li>
      
    
      
        <li><a href="/homework5">Homework 5</a></li>
      
    
      
        <li><a href="/homework6">Homework 6</a></li>
      
    
      
        <li><a href="/homework7">Homework 7</a></li>
      
    
      
        <li><a href="https://github.com/lucarep">My GitHub</a></li>
      
    
    
  </ul>
</nav>

  
  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://lucarep.github.io/homework6/6_ra/">6_RA</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2021-11-04 
      </span>
    
    
    <span class="post-author">:: Luca</span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://lucarep.github.io/tags/application/">Application</a>&nbsp;
    
    #<a href="https://lucarep.github.io/tags/research/">Research</a>&nbsp;
    
  </span>
  

  
    <img src="https://lucarep.github.io/img/6_RA.jpg" class="post-cover" alt="6_RA" />
  

  

  <div class="post-content"><div>
        <p>Table of Contents</p>
<ul>
<li><a href="#the-running-median">THE RUNNING MEDIAN</a></li>
<li><a href="#java-algorithm">JAVA ALGORITHM</a></li>
</ul>
<h1 id="the-running-median">THE RUNNING MEDIAN<a href="#the-running-median" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>As we have already seen in the previous dedicated article,the median of a set of integers is the midpoint value of the data set for which an equal number of integers are less than and greater than the value.</p>
<ul>
<li>If we keep each number in a sorted sequence then cost of single entry is O(n) and finding median is O(n).
A slight modification can be done by keeping the middle pointer and adjusting it based on the insertion on its left side and right side. In that case finding median after insertion is O(1). But the overall cost for finding median still remains O(n) as insertion in sorted sequence is necessary after each number is entered.</li>
<li>We can keep two heaps which divides the entered number in two almost equal halves. Half of the number would be greater than the median and the rest would be lesser. The upper half will be maintained in a min heap and the lower half will be maintained in a max heap. In this arrangement we can find out in O(1) time whether a new number would go to the upper half or lower half. All we need to do is to compare the new number with the head of two heaps. After deciding we can insert in a heap in O(log n) time. After this insertion if the heaps are unbalanced, we can just move from one heap to another. which is again of O(log n) complexity. And now we can find the median in O(1) time. If two heaps contain same number of elements then median is the average of the head of two heaps. If one is greater, then median is the head of the larger heap.</li>
</ul>
<h1 id="java-algorithm">JAVA ALGORITHM<a href="#java-algorithm" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Here, I found an algorithm in Java that can calculate the Running Median:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> java.util.Comparator<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.util.PriorityQueue<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> java.util.Random<span style="color:#f92672">;</span>
 
 
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RunningMedian</span>
<span style="color:#f92672">{</span>
    PriorityQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> upperQueue<span style="color:#f92672">;</span>
    PriorityQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> lowerQueue<span style="color:#f92672">;</span>
 
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">RunningMedian</span><span style="color:#f92672">()</span>
    <span style="color:#f92672">{</span>
        lowerQueue<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> PriorityQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;(</span>
          20<span style="color:#f92672">,</span><span style="color:#66d9ef">new</span> Comparator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;()</span>
        <span style="color:#f92672">{</span>
 
            <span style="color:#a6e22e">@Override</span>
            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compare</span><span style="color:#f92672">(</span>Integer o1<span style="color:#f92672">,</span> Integer o2<span style="color:#f92672">)</span>
            <span style="color:#f92672">{</span>
 
                <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>o1<span style="color:#f92672">.</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>o2<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
 
        <span style="color:#f92672">});</span>
        upperQueue<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> PriorityQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;();</span>
        upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MAX_VALUE</span><span style="color:#f92672">);</span>
        lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MIN_VALUE</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
 
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> <span style="color:#a6e22e">getMedian</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> num<span style="color:#f92672">)</span>
    <span style="color:#f92672">{</span>
        <span style="color:#75715e">//adding the number to proper heap
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>num<span style="color:#f92672">&gt;=</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())</span>
                upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>num<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">else</span>
                lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>num<span style="color:#f92672">);</span>
        <span style="color:#75715e">//balancing the heaps
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()-</span>lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()==</span>2<span style="color:#f92672">)</span>
            lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">());</span>
        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()-</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()==</span>2<span style="color:#f92672">)</span>
            upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">());</span>
        <span style="color:#75715e">//returning the median
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()==</span>lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">())</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">(</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">()+</span>lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">())/</span>2<span style="color:#f92672">.</span><span style="color:#a6e22e">0</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()&gt;</span>lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">())</span>
            <span style="color:#66d9ef">return</span> upperQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">else</span>
            <span style="color:#66d9ef">return</span> lowerQueue<span style="color:#f92672">.</span><span style="color:#a6e22e">peek</span><span style="color:#f92672">();</span>
 
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span>
    <span style="color:#f92672">{</span>
        Random random<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> Random<span style="color:#f92672">();</span>
        RunningMedian runningMedian<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> RunningMedian<span style="color:#f92672">();</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;num\tmedian&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span>0<span style="color:#f92672">;</span>i<span style="color:#f92672">&lt;</span>50<span style="color:#f92672">;++</span>i<span style="color:#f92672">)</span>
        <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> num<span style="color:#f92672">=</span>random<span style="color:#f92672">.</span><span style="color:#a6e22e">nextInt</span><span style="color:#f92672">(</span>100<span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">(</span>num<span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">print</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;\t&#34;</span><span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>
              runningMedian<span style="color:#f92672">.</span><span style="color:#a6e22e">getMedian</span><span style="color:#f92672">(</span>num<span style="color:#f92672">));</span>
        <span style="color:#f92672">}</span>
 
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div>
      </div></div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>© 2021 Luca Repechini</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://lucarep.github.io/assets/main.js"></script>
<script src="https://lucarep.github.io/assets/prism.js"></script>







  
</div>

</body>
</html>
